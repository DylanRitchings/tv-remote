import RPi.GPIO as GPIO
import time

# Set the GPIO mode to BCM
GPIO.setmode(GPIO.BCM)

IR_INPUT_PIN = 27  
IR_OUTPUT_PIN = 17
GPIO.setup(IR_INPUT_PIN, GPIO.IN)
GPIO.setup(IR_OUTPUT_PIN, GPIO.OUT)

def ir_input():
    try:
        pulse_duration_list=[]
        while True:
            while GPIO.input(IR_INPUT_PIN) == GPIO.HIGH:
                pass  
            start_time = time.time()
    
            while GPIO.input(IR_INPUT_PIN) == GPIO.LOW:
                pass  
            end_time = time.time()
    
            pulse_duration = end_time - start_time
            pulse_duration_list.append(pulse_duration)
            print(f"IR Pulse Duration: {pulse_duration:.6f} seconds")
            print(pulse_duration_list)
    
    except KeyboardInterrupt:
        pass
        
ir_output_list = [0.008900165557861328, 0.0005195140838623047, 0.0005230903625488281, 0.0005199909210205078, 0.0005183219909667969, 0.0005190372467041016, 0.0005209445953369141, 0.0005199909210205078, 0.0005202293395996094, 0.0005173683166503906, 0.0005185604095458984, 0.0005176067352294922, 0.0005173683166503906, 0.0005185604095458984, 0.0005180835723876953, 0.0005161762237548828, 0.0005180835723876953, 0.0005178451538085938, 0.0005161762237548828, 0.0005178451538085938, 0.0005176067352294922, 0.0005159378051757812, 0.000518798828125, 0.0005178451538085938, 0.0005178451538085938, 0.0005173683166503906, 0.0005156993865966797, 0.0005161762237548828, 0.0005159378051757812, 0.0005156993865966797, 0.0005164146423339844, 0.0005152225494384766, 0.000514984130859375, 0.0005130767822265625, 0.008923768997192383, 0.000514984130859375, 0.0005142688751220703, 0.0005152225494384766, 0.0005142688751220703, 0.0005168914794921875, 0.0004661083221435547, 0.0005164146423339844, 0.0005159378051757812, 0.0005159378051757812, 0.0005147457122802734, 0.0005154609680175781, 0.0005164146423339844, 0.000514984130859375, 0.0005154609680175781, 0.0005147457122802734, 0.0005145072937011719, 0.0005147457122802734, 0.0005142688751220703, 0.0005130767822265625, 0.0005147457122802734, 0.0005145072937011719, 0.0005133152008056641, 0.00058746337890625, 0.0005130767822265625, 0.0005114078521728516, 0.0005135536193847656, 0.0005128383636474609, 0.0005028247833251953, 0.0005128383636474609, 0.0005130767822265625, 0.0005121231079101562, 0.0005915164947509766, 0.0005114078521728516, 0.004029273986816406, 0.0005109310150146484, 0.0005121231079101562, 0.0007956027984619141, 0.0004036426544189453, 0.0005114078521728516, 0.0004820823669433594, 0.0005087852478027344, 0.0005118846893310547, 0.0005102157592773438, 0.0005090236663818359, 0.0003974437713623047, 0.00014734268188476562, 0.00051116943359375, 0.0005102157592773438, 0.0005104541778564453, 0.0005230903625488281, 0.00048828125, 0.00048828125, 0.0005099773406982422, 0.00048828125, 0.00048804283142089844, 0.0004878044128417969, 0.00048661231994628906, 0.0004870891571044922, 0.00048732757568359375, 0.0004863739013671875, 0.00048661231994628906]
def ir_output():
    try:
        for pulse_length in ir_output_list:
            GPIO.output(IR_OUTPUT_PIN, 1)
            time.sleep(pulse_length)
            print(pulse_length)
            GPIO.output(IR_OUTPUT_PIN, 0)
    except KeyboardInterrupt:
        pass
            
ir_input()

    # Clean up and release the GPIO pin
GPIO.cleanup()





